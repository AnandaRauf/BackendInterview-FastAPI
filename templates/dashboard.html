<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="/static/dashboard.css">
</head>
<body>
    <h2>User Dashboard</h2>
    <table border="1">
        <tr>
            <th>Username</th>
            <th>Email</th>
            <th>Profile Picture</th>
            <th>Balance</th>
        </tr>
        <tr>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <td>
                {% if user.profile_picture %}
                    <img src="{{ user.profile_picture }}" alt="Profile Picture" width="50">
                {% else %}
                    No Profile Picture
                {% endif %}
            </td>
            <td>{{ user.balance }} IDR</td>
            
        </tr>
    </table>
    <form action="/logout" method="get">
    <button type="submit">Logout</button>
</form>
    <h3>Upload Profile Picture</h3>
    <form action="/upload-profile" method="post" enctype="multipart/form-data">
        <input type="hidden" name="user_id" value="{{ user._id }}">
        <input type="file" name="file" accept="image/*">
        <button type="submit">Upload</button>
    </form>

    <h3>Top Up Balance</h3>
    <form action="/top-up" method="post">
        <input type="hidden" name="user_id" value="{{ user._id }}">
        <label for="amount">Select Amount:</label>
        <select id="amount" name="amount">
            <option value="5000">5000 IDR</option>
            <option value="10000">10000 IDR</option>
            <option value="15000">15000 IDR</option>
            <option value="20000">20000 IDR</option>
            <option value="25000">25000 IDR</option>
            <option value="50000">50000 IDR</option>
        </select>
        <button type="submit">Top Up</button>
    </form>

    <h3>Add Product</h3>
    <form action="/add-product" method="post" enctype="multipart/form-data">
        <input type="hidden" name="user_id" value="{{ user._id }}">
        <label for="name">Product Name:</label>
        <input type="text" id="name" name="name" required><br><br>
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" required><br><br>
        <label for="price">Price:</label>
        <input type="number" id="price" name="price" required><br><br>
        <label for="product_image">Product Image:</label>
        <input type="file" id="product_image" name="product_image" accept="image/*"><br><br>
        <button type="submit">Add Product</button>
    </form>

    <h3>Your Products</h3>
    <table border="1">
        <tr>
            <th>Product Name</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Product Image</th>
        </tr>
        {% for product in products %}
        <tr>
            <td>{{ product.name }}</td>
            <td>{{ product.quantity }}</td>
            <td>{{ product.price }} IDR</td>
            <td><img src="{{ product.image }}" alt="Product Image" width="50"></td>
        </tr>
        {% endfor %}
    </table>

    <h3>Transaction History</h3>
    <table border="1">
        <tr>
            <th>Date</th>
            <th>Amount</th>
            <th>Type</th>
        </tr>
        {% for transaction in transactions %}
        <tr>
            <td>{{ transaction.date }}</td>
            <td>{{ transaction.amount }} IDR</td>
            <td>{{ transaction.type }}</td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>